<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PRS: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PRS
   </div>
   <div id="projectbrief">System programming project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">PRS Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md11">About</a></li>
<li class="level1"><a href="#autotoc_md12">Organization of this documentation</a></li>
<li class="level1"><a href="#autotoc_md13">Prequisites</a></li>
<li class="level1"><a href="#autotoc_md14">Build the project</a><ul><li class="level2"><a href="#autotoc_md15">Build the game</a></li>
<li class="level2"><a href="#autotoc_md16">Build the utility program</a></li>
<li class="level2"><a href="#autotoc_md17">Build this documentation</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md18">Run the project</a><ul><li class="level2"><a href="#autotoc_md19">Run the game</a></li>
<li class="level2"><a href="#autotoc_md20">Run the utility program</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="autotoc_md11"></a>
About</h1>
<p>The goal of this project is to develop some basic mechanisms to be used in the development of a small 2D platform game.</p>
<p>The project is be divided into several distinct parts. The first one is about the implementation of a saving and loading mechanism for the map used in the game. The second one aims to develop a small program that can modify files containing a map. The last one consists in implementing an event manager that will allow the game to plan the moments at which an event need to be triggered.</p>
<p>This project requires the use of <code>Linux</code> system calls as much as possible.</p>
<p>The main game logic is provided in the form of the static library <code>libgame.a</code> which also contains the entry point of the program. No more information is supplied about this file.</p>
<h1><a class="anchor" id="autotoc_md12"></a>
Organization of this documentation</h1>
<p>The project is divided into three parts.</p>
<p>The fist part of the project is dedicated to the design of map archives. The documentation of the implemented functions is available in the <a class="el" href="group__game__group.html">game</a> module. This part specically deals with the <a class="el" href="map_8h.html#a8395f535c97512a0f7097248ca4cce50">map_save()</a> and <a class="el" href="map_8h.html#a251fb7a8902b621d851a8e9a08b73163">map_load()</a> functions located in the <a class="el" href="map_8h.html">map.h</a> header and the <a class="el" href="mapio_8c.html">mapio.c</a> source files. Additional implementation details are available in the <a class="el" href="first_part_page.html">First part</a> page.</p>
<p>The second part of the project is dedicated to the development of the <code>maputil</code> program that allows to modify map archives. The documentation of the program is available in the <a class="el" href="group__util__group.html">utility</a> module. Additional implentations details are available in the <a class="el" href="second_part_page.html">Second part</a> page.</p>
<p>The third part of the project is dedicated to the development of an event management system. The documentation of the implementated functions is available in the <a class="el" href="group__game__group.html">game</a> module. This part specifically deals with the <a class="el" href="timer_8h.html#af91690c716951a080ba4b44bd68fcb92">timer_init()</a>, <a class="el" href="timer_8h.html#a89f62df1eae116a0dacc46fcfbfc0934">timer_set()</a>, <a class="el" href="tempo_8c.html#aed9d8febd3d892a914b0989f01bde7f4">worker()</a> and <a class="el" href="tempo_8c.html#a6aa59f98cad89c73966351ad7afb303c">signal_handler()</a> functions located in the <a class="el" href="timer_8h.html">timer.h</a> header and the <a class="el" href="tempo_8c.html">tempo.c</a> source files. Additional implementations details are available in the <a class="el" href="third_part_page.html">Third part</a> page.</p>
<h1><a class="anchor" id="autotoc_md13"></a>
Prequisites</h1>
<p>Install the following prerequisites:</p>
<ul>
<li><a href="https://gcc.gnu.org/">GNU GCC</a>;</li>
<li><a href="https://www.sourceware.org/gdb/">GNU GDB</a>;</li>
<li><a href="https://www.gnu.org/software/make/">GNU Make</a>;</li>
<li><a href="https://www.libsdl.org/">SDL2</a>;</li>
<li><a href="https://www.libsdl.org/projects/SDL_image/">SDL2 Image</a>;</li>
<li><a href="https://www.libsdl.org/projects/SDL_mixer/">SDL2 Mixer</a>.</li>
</ul>
<div class="fragment"><div class="line">sudo apt-get install gcc gdb make libsdl2-dev libsdl2-image-dev libsdl2-mixer-dev</div>
</div><!-- fragment --><p>Additionally, install the following prerequisites in order to reverse engineer the <code>libgame.a</code>:</p>
<ul>
<li><a href="https://www.hex-rays.com/ida-pro/">IDA Pro</a> (not free);</li>
<li><a href="https://github.com/NationalSecurityAgency/ghidra">Ghidra</a>.</li>
</ul>
<p>Using <code>objdump</code> is also a possibility.</p>
<p>Next, install the following prerequisites in order to modify the <code>maputil</code> parsers:</p>
<ul>
<li><a href="https://www.gnu.org/software/gengetopt/gengetopt.html">Gengetopt</a>.</li>
</ul>
<div class="fragment"><div class="line">sudo apt-get install gengetopt</div>
</div><!-- fragment --><p>Finally, install the following prerequisites in order to modify this documentation:</p>
<ul>
<li><a href="https://doxygen.nl/">Doxygen</a>;</li>
<li><a href="https://graphviz.org/">Graphviz</a>.</li>
</ul>
<div class="fragment"><div class="line">sudo apt-get install doxygen graphviz</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md14"></a>
Build the project</h1>
<h2><a class="anchor" id="autotoc_md15"></a>
Build the game</h2>
<p>Run the following command:</p>
<div class="fragment"><div class="line">make</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md16"></a>
Build the utility program</h2>
<p>Run the following command:</p>
<div class="fragment"><div class="line">cd util/ &amp;&amp; make</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md17"></a>
Build this documentation</h2>
<p>Navigate to the <code>doxygen</code> directory and invoke <code>doxygen</code>:</p>
<div class="fragment"><div class="line">cd doxygen &amp;&amp; doxygen doxygen.conf</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md18"></a>
Run the project</h1>
<h2><a class="anchor" id="autotoc_md19"></a>
Run the game</h2>
<p>Run the game with the following command in order to use a predefined map:</p>
<div class="fragment"><div class="line">./game</div>
</div><!-- fragment --><p>Use the <code>-l</code> option to load a saved map:</p>
<div class="fragment"><div class="line">./game -l maps/saved.map</div>
</div><!-- fragment --><p>See the table below to know how to use the game:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Key </th><th class="markdownTableHeadLeft">Descrption  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>UP</code> </td><td class="markdownTableBodyLeft">Jump  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>LEFT</code> </td><td class="markdownTableBodyLeft">Move the character to the left  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>RIGHT</code> </td><td class="markdownTableBodyLeft">Move the character to the right  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>DOWN</code> </td><td class="markdownTableBodyLeft">Plant a bomb  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>SPACE</code> </td><td class="markdownTableBodyLeft">Launch a missile  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>t</code> </td><td class="markdownTableBodyLeft">Place a mine  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>e</code> </td><td class="markdownTableBodyLeft">Enter/Leave the level editor mode  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>s</code> </td><td class="markdownTableBodyLeft">Save the current map  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>ESCAPE</code> </td><td class="markdownTableBodyLeft">Leave the game  </td></tr>
</table>
<p>The following inputs are applicable to the level editor mode:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Key </th><th class="markdownTableHeadLeft">Descrption  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>UP</code> </td><td class="markdownTableBodyLeft">Move a tile up  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>LEFT</code> </td><td class="markdownTableBodyLeft">Move a tile to the left  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>RIGHT</code> </td><td class="markdownTableBodyLeft">Move a tile to the right  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>DOWN</code> </td><td class="markdownTableBodyLeft">Move a tile down  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>SPACE</code> </td><td class="markdownTableBodyLeft">Place a tile  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>TAB</code> </td><td class="markdownTableBodyLeft">Select a tile  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>ESCAPE</code> </td><td class="markdownTableBodyLeft">Leave the level editor mode  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>e</code> </td><td class="markdownTableBodyLeft">Leave the level editor mode  </td></tr>
</table>
<p>Saved maps are located in the <code>maps</code> directory.</p>
<h2><a class="anchor" id="autotoc_md20"></a>
Run the utility program</h2>
<p>Run the following commands:</p>
<div class="fragment"><div class="line">cd util/</div>
<div class="line">./maputil [OPTIONS...]</div>
</div><!-- fragment --><p>See the table below for a complete overview of the program options:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Long options </th><th class="markdownTableHeadCenter">Short options </th><th class="markdownTableHeadCenter">Mandatory </th><th class="markdownTableHeadLeft">Parameters </th><th class="markdownTableHeadLeft">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>--help</code> </td><td class="markdownTableBodyCenter"><code>None</code> </td><td class="markdownTableBodyCenter"><code>No</code> </td><td class="markdownTableBodyLeft"><code>None</code> </td><td class="markdownTableBodyLeft">Displays the usage of the program.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>--version</code> </td><td class="markdownTableBodyCenter"><code>-V</code> </td><td class="markdownTableBodyCenter"><code>No</code> </td><td class="markdownTableBodyLeft"><code>None</code> </td><td class="markdownTableBodyLeft">Displays the version of the program.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>--file</code> </td><td class="markdownTableBodyCenter"><code>-f</code> </td><td class="markdownTableBodyCenter"><code>Yes</code> </td><td class="markdownTableBodyLeft"><code>String</code> </td><td class="markdownTableBodyLeft">Map archive.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>--getwidth</code> </td><td class="markdownTableBodyCenter"><code>-w</code> </td><td class="markdownTableBodyCenter"><code>No</code> </td><td class="markdownTableBodyLeft"><code>None</code> </td><td class="markdownTableBodyLeft">Gets the width of a map.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>--getheight</code> </td><td class="markdownTableBodyCenter"><code>-h</code> </td><td class="markdownTableBodyCenter"><code>No</code> </td><td class="markdownTableBodyLeft"><code>None</code> </td><td class="markdownTableBodyLeft">Gets the height of a map.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>--getobjetcs</code> </td><td class="markdownTableBodyCenter"><code>-o</code> </td><td class="markdownTableBodyCenter"><code>No</code> </td><td class="markdownTableBodyLeft"><code>None</code> </td><td class="markdownTableBodyLeft">Gets the number of tiles of a map.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>--getinfo</code> </td><td class="markdownTableBodyCenter"><code>-i</code> </td><td class="markdownTableBodyCenter"><code>No</code> </td><td class="markdownTableBodyLeft"><code>None</code> </td><td class="markdownTableBodyLeft">Gets the width, the height and the number of tiles of a map.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>--setwidth</code> </td><td class="markdownTableBodyCenter"><code>-W</code> </td><td class="markdownTableBodyCenter"><code>No</code> </td><td class="markdownTableBodyLeft"><code>Integer</code> </td><td class="markdownTableBodyLeft">Sets the width of a map.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>--setheight</code> </td><td class="markdownTableBodyCenter"><code>-H</code> </td><td class="markdownTableBodyCenter"><code>No</code> </td><td class="markdownTableBodyLeft"><code>Integer</code> </td><td class="markdownTableBodyLeft">sets the height of a map.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>--setobjects</code> </td><td class="markdownTableBodyCenter"><code>-O</code> </td><td class="markdownTableBodyCenter">See the table below </td><td class="markdownTableBodyLeft"><code>Sring</code> </td><td class="markdownTableBodyLeft">Replaces the tile of a map.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>--pruneobjects</code> </td><td class="markdownTableBodyCenter"><code>-p</code> </td><td class="markdownTableBodyCenter"><code>No</code> </td><td class="markdownTableBodyLeft"><code>None</code> </td><td class="markdownTableBodyLeft">Remove unused tiles from a map.  </td></tr>
</table>
<p>The <code>--setobjects</code> option accepts a string where the following parameters are mandatory:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Long options </th><th class="markdownTableHeadCenter">Short options </th><th class="markdownTableHeadCenter">Mandatory </th><th class="markdownTableHeadLeft">Parameters </th><th class="markdownTableHeadLeft">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>--path</code> </td><td class="markdownTableBodyCenter"><code>-p</code> </td><td class="markdownTableBodyCenter"><code>Yes</code> </td><td class="markdownTableBodyLeft"><code>String</code> </td><td class="markdownTableBodyLeft">The path to a tile.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>--frames</code> </td><td class="markdownTableBodyCenter"><code>-f</code> </td><td class="markdownTableBodyCenter"><code>Yes</code> </td><td class="markdownTableBodyLeft"><code>Integer</code> </td><td class="markdownTableBodyLeft">The number of frames of the tile.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>--solidity</code> </td><td class="markdownTableBodyCenter"><code>-s</code> </td><td class="markdownTableBodyCenter"><code>Yes</code> </td><td class="markdownTableBodyLeft"><code>Enumeration {solid, semi-solid, air}</code> </td><td class="markdownTableBodyLeft">Solidity property of the tile.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>--destructible</code> </td><td class="markdownTableBodyCenter"><code>-d</code> </td><td class="markdownTableBodyCenter"><code>Yes</code> </td><td class="markdownTableBodyLeft"><code>Enumeration {destructile, not-destrucible}</code> </td><td class="markdownTableBodyLeft">Destructible property of the tile.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>--collectible</code> </td><td class="markdownTableBodyCenter"><code>-c</code> </td><td class="markdownTableBodyCenter"><code>Yes</code> </td><td class="markdownTableBodyLeft"><code>Enumeration {collectible, not-collectible}</code> </td><td class="markdownTableBodyLeft">Collectible property of the tile.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>--generator</code> </td><td class="markdownTableBodyCenter"><code>-g</code> </td><td class="markdownTableBodyCenter"><code>Yes</code> </td><td class="markdownTableBodyLeft"><code>Enumeration {generator, not-generator}</code> </td><td class="markdownTableBodyLeft">Generator property of the tile.  </td></tr>
</table>
<p>Examples of uses are listed below:</p>
<ul>
<li>Gets the width of a map:</li>
</ul>
<div class="fragment"><div class="line">./maputil -f ../maps/saved.map -w</div>
</div><!-- fragment --><ul>
<li>Gets the height of a map:</li>
</ul>
<div class="fragment"><div class="line">./maputil -f ../maps/saved.map -h</div>
</div><!-- fragment --><ul>
<li>Gets the number of tiles of a map:</li>
</ul>
<div class="fragment"><div class="line">./maputil -f ../maps/saved.map -o</div>
</div><!-- fragment --><ul>
<li>Gets all the information listed above:</li>
</ul>
<div class="fragment"><div class="line">./maputil -f ../maps/saved.map -i</div>
</div><!-- fragment --><ul>
<li>Sets the width of a map:</li>
</ul>
<div class="fragment"><div class="line">./maputil -f ../maps/saved.map -W 40</div>
</div><!-- fragment --><ul>
<li>Sets the height of a map:</li>
</ul>
<div class="fragment"><div class="line">./maputil -f ../maps/saved.map -H 16</div>
</div><!-- fragment --><ul>
<li>Sets the objects of a map:</li>
</ul>
<div class="fragment"><div class="line">./maputil -f ../maps/saved.map -O <span class="stringliteral">&quot;-p images/marble.png 1 -s solid -d not-destructible -c not-collectible -g not-generator&quot;</span> -O <span class="stringliteral">&quot;-p images/marble.png 1 -s solid -d not-destructible -c not-collectible -g not-generator&quot;</span> -O <span class="stringliteral">&quot;-p images/marble.png 1 -s solid -d not-destructible -c not-collectible -g not-generator&quot;</span></div>
</div><!-- fragment --><ul>
<li>Removes unused tile from a map:</li>
</ul>
<div class="fragment"><div class="line">./maputil -f ../maps/saved.map -p</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
